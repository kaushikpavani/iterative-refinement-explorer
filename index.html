<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iterative Self-Refinement Explorer</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ”„ Iterative Self-Refinement Explorer</h1>
            <p class="subtitle">Watch how recursive language models improve outputs through iterative refinement passes</p>
        </header>

        <div class="main-grid">
            <!-- Left Panel: Controls -->
            <div class="control-panel">
                <h2>Problem Input</h2>
                
                <div class="input-section">
                    <label for="problem-select">Choose Example:</label>
                    <select id="problem-select">
                        <option value="fraud-1">Fraud: Payment Flag Analysis</option>
                        <option value="fraud-2">Fraud: Transaction Pattern Detection</option>
                        <option value="cv-1">Computer Vision: Counterfeit Detection</option>
                        <option value="nlp-1">NLP: Sentiment & Intent Analysis</option>
                    </select>
                </div>

                <div class="input-section">
                    <label for="problem-input">Or Enter Custom Problem:</label>
                    <textarea id="problem-input" placeholder="Ask a reasoning question..."></textarea>
                </div>

                <div class="slider-section">
                    <label for="pass-slider">Number of Refinement Passes: <span id="pass-count">3</span></label>
                    <input type="range" id="pass-slider" min="1" max="5" value="3">
                </div>

                <button id="run-button" class="primary-btn">Run Refinement</button>

                <div class="info-box">
                    <h3>How It Works</h3>
                    <p><strong>Pass 1:</strong> Initial response (fast, shallow)</p>
                    <p><strong>Pass 2+:</strong> Model critiques itself, refines reasoning</p>
                    <p><strong>Result:</strong> Deeper, more confident answer</p>
                </div>
            </div>

            <!-- Right Panel: Results -->
            <div class="results-panel">
                <h2>Refinement Timeline</h2>
                
                <div id="timeline" class="timeline">
                    <!-- Passes will be rendered here -->
                </div>

                <div class="metrics-section">
                    <h3>Quality Metrics Across Passes</h3>
                    <div id="metrics-chart"></div>
                </div>

                <div class="detailed-view" id="detailed-view">
                    <!-- Detailed pass view will appear here -->
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
